# ๐ Create Database Tables Guide

## ุฏููู ุฅูุดุงุก ุฌุฏุงูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### โ๏ธ ุงููุดููุฉ
ุฌุฏูู `products` (ูุฌุฏุงูู ุฃุฎุฑู) ุบูุฑ ููุฌูุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ููุง ูุณุจุจ ุฎุทุฃ 500 ุนูุฏ ูุญุงููุฉ ุฅูุดุงุก ููุชุฌ.

### โ ุงูุญู
ูู ุจุชุดุบูู ุณูุฑูุจุช `create_tables.sql` ุฃููุงู ูุฅูุดุงุก ุฌููุน ุงูุฌุฏุงููุ ุซู ุดุบูู `reset_and_seed.sql` ูููุก ุงูุจูุงูุงุช.

---

## ๐ ุฎุทูุงุช ุงูุฅุนุฏุงุฏ ุงููุงููุฉ

### ุงูุฎุทูุฉ 1: ุฅูุดุงุก ุงูุฌุฏุงูู

1. ุงูุชุญ [Supabase Dashboard](https://supabase.com/dashboard)
2. ุงุฎุชุฑ ูุดุฑูุนู: `qlpkhofninwegrzyqgmp`
3. ุงุฐูุจ ุฅูู **SQL Editor** โ **New Query**
4. ุงูุชุญ ููู `database/create_tables.sql`
5. ุงูุณุฎ **ุฌููุน** ุงููุญุชูู
6. ุงูุตู ูู SQL Editor
7. ุงุถุบุท **Run**

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุณูุชู ุฅูุดุงุก ุฌููุน ุงูุฌุฏุงูู
- โ ุณุชุธูุฑ ุฑุณุงูุฉ ูู Messages tab ุชุนุฑุถ ุนุฏุฏ ุงูุฌุฏุงูู ุงูููุดุฃุฉ

### ุงูุฎุทูุฉ 2: ุฅุนุงุฏุฉ ุชุนููู ูุฒุฑุน ุงูุจูุงูุงุช

ุจุนุฏ ุฅูุดุงุก ุงูุฌุฏุงูู:

1. ุงูุชุญ ููู `database/reset_and_seed.sql`
2. ุงูุณุฎ **ุฌููุน** ุงููุญุชูู
3. ุงูุตู ูู SQL Editor
4. ุงุถุบุท **Run**

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุณูุชู ุญุฐู ุฃู ุจูุงูุงุช ููุฌูุฏุฉ
- โ ุณูุชู ุฅูุดุงุก ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ (Roles, Users, Sizes, Colors, Categories, Stock Locations, Payment Methods)

### ุงูุฎุทูุฉ 3: ุชูุนูู RLS Policies

ุจุนุฏ seeding:

1. ุงูุชุญ ููู `database/enable_rls.sql`
2. ุงูุณุฎ **ุฌููุน** ุงููุญุชูู
3. ุงูุตู ูู SQL Editor
4. ุงุถุบุท **Run**

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุณูุชู ุชูุนูู RLS ุนูู ุฌููุน ุงูุฌุฏุงูู
- โ ุณูุชู ุฅูุดุงุก policies ููู service_role

---

## ๐ ุงูุฌุฏุงูู ุงูุชู ุณูุชู ุฅูุดุงุคูุง

### ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ:
- โ `roles` - ุงูุฃุฏูุงุฑ
- โ `permissions` - ุงูุตูุงุญูุงุช
- โ `role_permissions` - ุฑุจุท ุงูุฃุฏูุงุฑ ุจุงูุตูุงุญูุงุช
- โ `sizes` - ุงูููุงุณุงุช
- โ `colors` - ุงูุฃููุงู
- โ `categories` - ุงููุฆุงุช
- โ `stock_locations` - ููุงูุน ุงููุฎุฒูู
- โ `payment_methods` - ุทุฑู ุงูุฏูุน

### ุฌุฏุงูู ุงููุณุชุฎุฏููู:
- โ `users` - ุงููุณุชุฎุฏููู
- โ `addresses` - ุงูุนูุงููู

### ุฌุฏุงูู ุงูููุชุฌุงุช:
- โ `products` - ุงูููุชุฌุงุช
- โ `product_variants` - ูุชุบูุฑุงุช ุงูููุชุฌุงุช
- โ `product_images` - ุตูุฑ ุงูููุชุฌุงุช

### ุฌุฏุงูู ุงููุฎุฒูู:
- โ `stock_items` - ุนูุงุตุฑ ุงููุฎุฒูู
- โ `stock_transfers` - ุชุญูููุงุช ุงููุฎุฒูู
- โ `stock_transfer_items` - ุนูุงุตุฑ ุงูุชุญููู
- โ `stock_adjustments` - ุชุนุฏููุงุช ุงููุฎุฒูู
- โ `stock_adjustment_items` - ุนูุงุตุฑ ุงูุชุนุฏูู

### ุฌุฏุงูู ุงููุจูุนุงุช:
- โ `invoices` - ุงูููุงุชูุฑ
- โ `invoice_items` - ุนูุงุตุฑ ุงูููุงุชูุฑ
- โ `payments` - ุงููุฏููุนุงุช
- โ `returns` - ุงููุฑุชุฌุนุงุช
- โ `return_items` - ุนูุงุตุฑ ุงููุฑุชุฌุนุงุช
- โ `commission_records` - ุณุฌูุงุช ุงูุนูููุงุช

### ุฌุฏุงูู ุงูุชุฌุงุฑุฉ ุงูุฅููุชุฑูููุฉ:
- โ `orders` - ุงูุทูุจุงุช
- โ `order_items` - ุนูุงุตุฑ ุงูุทูุจุงุช
- โ `carts` - ุณูุงุช ุงูุชุณูู
- โ `cart_items` - ุนูุงุตุฑ ุงูุณูุฉ

### ุฌุฏุงูู ุงูุดุญู:
- โ `delivery_zones` - ููุงุทู ุงูุชูุตูู
- โ `shipping_rates` - ุฃุณุนุงุฑ ุงูุดุญู
- โ `courier_companies` - ุดุฑูุงุช ุงูุดุญู
- โ `shipments` - ุงูุดุญูุงุช

### ุฌุฏุงูู ุฃุฎุฑู:
- โ `expenses` - ุงููุตุฑููุงุช
- โ `attachments` - ุงููุฑููุงุช
- โ `audit_logs` - ุณุฌูุงุช ุงูุชุฏููู
- โ `notifications` - ุงูุฅุดุนุงุฑุงุช

---

## โ ุงูุชุญูู ูู ุงููุฌุงุญ

ุจุนุฏ ุชุดุบูู ุฌููุน ุงูุณูุฑูุจุชุงุชุ ุชุญูู ูู:

```sql
-- ุงูุชุญูู ูู ูุฌูุฏ ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public' 
  AND table_name IN ('products', 'users', 'roles', 'categories', 'sizes', 'colors')
ORDER BY table_name;
```

ูุฌุจ ุฃู ุชุฑู 6 ุฌุฏุงูู ุนูู ุงูุฃูู.

---

## ๐ ุญู ุงููุดุงูู

### ุฎุทุฃ: "relation already exists"
- ุงูุฌุฏุงูู ููุฌูุฏุฉ ุจุงููุนู
- ููููู ุชุฎุทู `create_tables.sql` ูุงูุงูุชูุงู ูุจุงุดุฑุฉ ุฅูู `reset_and_seed.sql`

### ุฎุทุฃ: "permission denied"
- ุชุฃูุฏ ูู ุงุณุชุฎุฏุงู Supabase SQL Editor (ููุณ ูู ุชุทุจูู ุฎุงุฑุฌู)
- ุชุฃูุฏ ูู ุฃูู ุชุณุชุฎุฏู ุญุณุงุจ Admin ูู Supabase

### ุฎุทุฃ: "foreign key constraint"
- ุชุฃูุฏ ูู ุชุดุบูู ุงูุณูุฑูุจุชุงุช ุจุงูุชุฑุชูุจ ุงูุตุญูุญ:
  1. `create_tables.sql` ุฃููุงู
  2. `reset_and_seed.sql` ุซุงููุงู
  3. `enable_rls.sql` ุฃุฎูุฑุงู

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุชุฑุชูุจ ููู**: ูุฌุจ ุชุดุบูู `create_tables.sql` ูุจู `reset_and_seed.sql`
2. **ุงูุจูุงูุงุช**: ุจุนุฏ ุชุดุบูู `reset_and_seed.sql`ุ ุณุชุฌุฏ:
   - Admin user: `admin@qote.com` / `admin123`
   - POS user: `pos@qote.com` / `pos123`
3. **RLS**: ุจุนุฏ ุชูุนูู RLSุ ุชุฃูุฏ ูู ุชุดุบูู `enable_rls.sql` ูุฅูุดุงุก policies

---

## ๐ฏ ุจุนุฏ ุงูุฅุนุฏุงุฏ

ุจุนุฏ ุฅููุงู ุฌููุน ุงูุฎุทูุงุช:

1. โ ุณุฌูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู `admin@qote.com` / `admin123`
2. โ ุฃูุดุฆ ููุชุฌุงุช ูู ุตูุญุฉ Products
3. โ ุนููู ูุฎุฒูู ูู ุตูุญุฉ Inventory โ Assign Stock
4. โ ุงุฎุชุจุฑ ุงููุธุงู ููุชุฃูุฏ ูู ุฃู ูู ุดูุก ูุนูู






